"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[15217],{15217:(A,m,i)=>{i.r(m),i.d(m,{default:()=>h});var r,E=i(84911),u=i(4594),t=i(35548),c=i(66094),g=i(85483),d=i(37399),s=i(69104),C=i(98808),v=i(39908),f=i(28598),D=i(29655);function M(_,n){if(1&_){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,w=t.oxw(3),x=t.MAs(1);return t.KtG(w.onClick(l.login,x.nativeFocusableElement))}),t._uU(1),t.TgZ(2,"tui-avatar",7),t._uU(3),t.ALo(4,"tuiInitials"),t.qZA()()}if(2&_){const e=n.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("src",e.avatar),t.xp6(1),t.hij(" ",t.lcZ(4,3,e.name)," ")}}function T(_,n){if(1&_){const e=t.EpF();t.TgZ(0,"tui-data-list",4),t.NdJ("keydown.escape",function(){t.CHM(e),t.oxw(2);const a=t.MAs(1);return t.KtG(a.nativeFocusableElement.focus())}),t.YNc(1,M,5,5,"button",5),t.qZA()}if(2&_){const e=t.oxw(2),o=t.MAs(1);t.xp6(1),t.Q6J("ngForOf",e.filterItems(o.nativeFocusableElement))}}function O(_,n){if(1&_&&t.YNc(0,T,2,1,"tui-data-list",3),2&_){t.oxw();const e=t.MAs(1);t.Q6J("ngIf",e.nativeFocusableElement)}}class p{constructor(){this.options=d.EMPTY_QUERY,this.value="Type @ to see a dropdown",this.items=[{name:"Alexander Inkin",avatar:g.Ll`/images/avatar.jpg`,login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}],this.predicate=n=>(0,s.tuiGetWordRange)(n).toString().startsWith("@")}onArrow(n,e){const o=this.options[e];o&&(n.preventDefault(),o.nativeElement.focus())}filterItems(n){const e=this.getCurrentSearch(n).replace("@","");return this.getFilteredItems(this.items,e)}onClick(n,e){const o=this.getCurrentSearch(e),a=this.value.replace(o,n),l=a.indexOf(n)+n.length;this.value=a,e.focus(),e.value=a,e.setSelectionRange(l,l)}getFilteredItems(n,e){return n.filter(({name:o,login:a})=>a.startsWith(e)||o.startsWith(e))}getCurrentSearch(n){return n.value.slice(n.value.indexOf("@"),n.selectionStart)}}(r=p).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],viewQuery:function(n,e){if(1&n&&(t.Gf(s.TuiDriver,5),t.Gf(s.TuiOptionComponent,5,t.SBq)),2&n){let o;t.iGM(o=t.CRH())&&(e.driver=o.first),t.iGM(o=t.CRH())&&(e.options=o)}},standalone:!0,exportAs:"ExampleComponent2",features:[t.jDz],decls:6,vars:6,consts:[["tuiDropdownSelectionPosition","word",3,"pseudoFocus","tuiDropdown","tuiDropdownSelection","ngModel","ngModelChange","keydown.arrowDown","keydown.arrowUp"],["textarea",""],["dropdown",""],["class","menu",3,"keydown.escape",4,"ngIf"],[1,"menu",3,"keydown.escape"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"],["size","s",3,"src"]],template:function(n,e){if(1&n&&(t.TgZ(0,"tui-textarea",0,1),t.NdJ("ngModelChange",function(a){return e.value=a})("keydown.arrowDown",function(a){return e.onArrow(a,"first")})("keydown.arrowUp",function(a){return e.onArrow(a,"last")}),t.ALo(2,"async"),t._uU(3," Type a message\n"),t.qZA(),t.YNc(4,O,1,1,"ng-template",null,2,t.W1O)),2&n){const o=t.MAs(5);t.Q6J("pseudoFocus",t.lcZ(2,4,e.driver)||null)("tuiDropdown",o)("tuiDropdownSelection",e.predicate)("ngModel",e.value)}},dependencies:[v.MuE,f.FC,D.B,s.TuiDropdownSelectionDirective,s.TuiDropdownDirective,c.u5,c.JJ,c.On,u.Ov,s.TuiDataListComponent,u.O5,u.sg,s.TuiOptionComponent,C.TuiAvatarComponent,s.TuiInitialsPipe],styles:[".menu[_ngcontent-%COMP%]{width:12.5rem}"],changeDetection:0}),(0,E.gn)([d.tuiPure],p.prototype,"getFilteredItems",null);const h=p}}]);